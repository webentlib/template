1. Django
=========

### ПОДГОТОВКА

1. Создать папки /www/ и /env/ (если нет) | mkdir ~/Documents/www/ && mkdir ~/Documents/env/
2. Рекомендуется скопировать этот документ в локальный файл, заменить myproject на yourproject, и следовать ему

### УСТАНОВКА DJANGO

1. Установить новый питон | https://www.python.org/
1. Создать папку /myproject/ в /www/ | mkdir ~/Documents/www/myproject/
2. Открыть папку /myproject/ в IDE
3. Создать python-окружение /myproject/ в /env/ | python3.14 -m venv ~/Documents/env/myproject/
4. Активировать python-окружение | source ~/Documents/env/myproject/bin/activate
5. Установить Django | pip install django
6. Создать django-проект | mkdir api && django-admin startproject conf api

### НАСТРОЙКА IDE

1. Указать IDE путь к python-окружению | Interpreter -> Add -> ~/Documents/env/myproject/bin/python
2. Указать IDE путь к Django и её настройкам | Enable Django Support -> Django project root, Settings
3. Указать IDE Sources Root | Right click on '/api/' -> Mark Directory as -> Sources Root

### ЛОКАЛЬНЫЕ НАСТРОЙКИ

1. Создать локальные настройки в /api/conf/ | touch api/conf/settings_local.py | см. template
2. В самом низу settings.py добавить лейбл `# CUSTOM` для будующих настроек | см. template
3. В самый низу settings.py, под `#CUSTOM` добавить `# Local` и импортировать локальные настройки | см. template

### ПОДКЛЮЧЕНИЕ POSTGRESQL

1. Создать БД в PostgreSQL (настроить UI — DataGrip или аналог) | psql ; createdb myproject
2. Установить PostgreSQL адаптер | pip install psycopg
3. Описать подключение к PostgreSQL в локальных настройках

### ПОДГОТОВКА К ПЕРВОМУ АППЛИКЕЙШЕНУ

1. Создать пакет /apps/ в /api/, внутри создать пустой пакет /migrations/, models.py, admin.py | см. template
2. Подключить `apps` внизу `settings.py:INSTALLED_APPS` с лейблом `# Custom` | см. template

### ПОЛЬЗОВАТЕЛИ (ЕСЛИ НЕ AUTHSERVICE)

1. Создать пакет /users/ в /api/apps/ с models.py, admin.py | см. template
2. Отпроксировать models.py, admin.py пользователя в /api/apps/models.py, /api/apps/admin.py | см. template
3. Указать модель пользователя в `settings.py:AUTH_USER_MODEL` в блоке `# CUSTOM` под новым лейблом `User` | см. template
4. Там же можно указать время жизни сесии `settings.py:SESSION_COOKIE_AGE` | см. template

### ПОЛЬЗОВАТЕЛИ (ЕСЛИ AUTHSERVICE)

1. Скопировать/выкачать и подключить middleware | TODO
2. Скопировать/выкачать и подключить модель User | TODO
3. Запустить authservice | TODO

### НАСТРОЙКА КОНСОЛЕЙ

1. Переименовать текущую вкладку консоли в 'ROOT', там будем вызывать глобальные команды (`git`, `invoke` и т.д.)
2. Создать новую вкладку в консоли 'API', `cd api`, там будем вызывать `python manage.py runserver`
3. Создать новую вкладку в консоли 'MIGRATE', `cd api`, там будем вызывать `python manage.py makemigraions` и `python manage.py migrate`

### ПЕРВЫЙ ЗАПУСК

1. MIGRATE: Создать миграции | python manage.py makemigrations
2. MIGRATE: Впервые смигрировать | python manage.py migrate
3. MIGRATE: Создать супер-пользователя | python manage.py createsuperuser
4. API: Запустить проект | python manage.py runserver
5. Browser: Перейти в панель администратора, авторизоваться, убедиться что всё хорошо | http://127.0.0.1:8000/admin/
